name: Continuous Integration Tests

on:
  - push

jobs:
  woocommerce_3_3:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1
      - name: Launch WooCommerce 3.3
        run: make bootstrap-33
        env:
          COMPOSE_INTERACTIVE_NO_CLI: 1
      - uses: cypress-io/github-action@v2
        env:
          CYPRESS_WC_VERSION: "33"
          CYPRESS_API_KEY: ${{ secrets.API_KEY }}
  woocommerce_4_9:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1
      - name: Launch WooCommerce 4.9
        run: make bootstrap-49
        env:
          COMPOSE_INTERACTIVE_NO_CLI: 1
      - uses: cypress-io/github-action@v2
        env:
          CYPRESS_WC_VERSION: "49"
          CYPRESS_API_KEY: ${{ secrets.API_KEY }}
  woocommerce_5_4:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1
      - name: Launch WooCommerce 5.4
        run: make bootstrap-54
        env:
          COMPOSE_INTERACTIVE_NO_CLI: 1
      - uses: cypress-io/github-action@v2
        env:
          CYPRESS_WC_VERSION: "54"
          CYPRESS_API_KEY: ${{ secrets.API_KEY }}
  woocommerce_5_6:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1
      - name: Launch WooCommerce 5.6
        run: make bootstrap-56
        env:
          COMPOSE_INTERACTIVE_NO_CLI: 1
      - uses: cypress-io/github-action@v2
        env:
          CYPRESS_WC_VERSION: "56"
          CYPRESS_API_KEY: ${{ secrets.API_KEY }}
  woocommerce_5_9:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1
      - name: Launch WooCommerce 5.9
        run: make bootstrap-59
        env:
          COMPOSE_INTERACTIVE_NO_CLI: 1
      - uses: cypress-io/github-action@v2
        env:
          CYPRESS_WC_VERSION: "59"
          CYPRESS_API_KEY: ${{ secrets.API_KEY }}
  woocommerce_5_9_wp_6:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1
      - name: Launch WooCommerce 5.9 with WordPress 6.0.3
        run: make bootstrap-59-6
        env:
          COMPOSE_INTERACTIVE_NO_CLI: 1
      - uses: cypress-io/github-action@v2
        env:
          CYPRESS_WC_VERSION: "59_6"
          CYPRESS_API_KEY: ${{ secrets.API_KEY }}
