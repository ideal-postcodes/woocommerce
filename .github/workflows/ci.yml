name: Continuous Integration Tests

on:
  - push

jobs:
  woocommerce_3_3:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1
      - name: Launch WooCommerce 3.3
        run: make bootstrap-33
        env:
          COMPOSE_INTERACTIVE_NO_CLI: 1
      - uses: cypress-io/github-action@v2
        env:
          CYPRESS_WC_VERSION: "33"
          CYPRESS_API_KEY: ${{ secrets.API_KEY }}
  woocommerce_4_9:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1
      - name: Launch WooCommerce 4.9
        run: make bootstrap-49
        env:
          COMPOSE_INTERACTIVE_NO_CLI: 1
      - uses: cypress-io/github-action@v2
        env:
          CYPRESS_WC_VERSION: "49"
          CYPRESS_API_KEY: ${{ secrets.API_KEY }}
  woocommerce_5_2:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1
      - name: Launch WooCommerce 5.2
        run: make bootstrap-52
        env:
          COMPOSE_INTERACTIVE_NO_CLI: 1
      - uses: cypress-io/github-action@v2
        env:
          CYPRESS_WC_VERSION: "52"
          CYPRESS_API_KEY: ${{ secrets.API_KEY }}
  woocommerce_5_4:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1
      - name: Launch WooCommerce 5.4
        run: make bootstrap-54
        env:
          COMPOSE_INTERACTIVE_NO_CLI: 1
      - uses: cypress-io/github-action@v2
        env:
          CYPRESS_WC_VERSION: "54"
          CYPRESS_API_KEY: ${{ secrets.API_KEY }}
